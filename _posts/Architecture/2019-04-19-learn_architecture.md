---

layout: post
title: 如何学习架构
category: 架构
tags: Architecture
keywords: project

---

## 简介（持续更新）

* TOC
{:toc}

借助[如何学习分布式系统](http://qiankunli.github.io/2018/04/16/learn_distributed_system.html) 得来的经验，当一个知识足够复杂，如何学习它本身就很值得玩味

到目前为止，笔者关于架构的几篇文章或笔记

1. [《软件架构设计》笔记](http://qiankunli.github.io/2019/04/16/architecture_design_note.html)
2. [反应式架构摸索](http://qiankunli.github.io/2019/01/21/reactive_architecture.html)
3. [系统设计的一些体会](http://qiankunli.github.io/2018/09/28/system_design.html)
4. [《左耳听风》笔记](http://qiankunli.github.io/2018/09/08/zuoertingfeng_note.html)
5. [《从0开始学架构》笔记](http://qiankunli.github.io/2018/05/06/architecture_from_0_note.html)

按照许式伟的说法，架构相关的图书大概有几类

1. 架构思维类。 通常从一些著名的架构理论讲起，比如开闭原则、单一职责原则等等。其弊端在于过度理论化，而计算机科学归根到底属于工程技术类，应该实践第一。
2. 设计模式类。 这类一般上来就进入架构的局部细节，每个模式的来龙去脉并不容易理解。就算理解了某个具体的模式，也很难真正做到活学活用。
3. 分布式系统架构设计类。 通常从服务端的通用问题如一致性、高可用、高并发挑战等话题讲起，阐述大型业务系统面临的挑战。这些知识虽然非常有价值，但无法延伸至通用业务架构，对大部分企业的架构实践不具备真正的指导意义。
4. 重构类。 主要讲如何如何改进代码，其实是最实用的一类。但在我看来，一个模块最初的地基是最重要的，基本决定了这座大厦能够撑多久，而重构更多侧重于大厦建成之后，在服务于人的前提下怎么去修修补补，延长生命。


## 串一串编程范式

[架构整洁之道, 看这一篇就够了！](https://mp.weixin.qq.com/s/Kd1T40KZWvdThKC3IN6n-Q)

架构是软件系统的一部分，所以要明白架构的价值，首先要明确软件系统的价值。软件系统的价值有两方面，行为价值和架构价值。

1. 行为价值是软件的核心价值，包括需求的实现，以及可用性保障（功能性 bug 、性能、稳定性）。这几乎占据了我们90%的工作内容，支撑业务先赢是我们工程师的首要责任。**如果业务是明确的、稳定的，架构的价值就可以忽略不计，但业务通常是不明确的、飞速发展的，这时架构就无比重要，因为架构的价值就是让我们的软件（Software）更软（Soft）**。
2. 架构价值

    1. 当需求变更时，所需的软件变更必须简单方便。
    2. 变更实施的难度应该和变更的范畴（scope）成等比，而与变更的具体形状（shape）无关。

实现行为价值的需求通常是 PD 提出的，都比较紧急，但并不总是特别重要；架构价值的工作内容，通常是开发同学提出的，都很重要但基本不是很紧急，短期内不做也死不了。我们开发同学，在低头敲代码之前，一定要把杂糅在一起的“重要且紧急”和“不重要但紧急”分开，把我们架构工作（“重要但不紧急”）插进去。

**其实所谓架构就是限制**，限制源码放在哪里、限制依赖、限制通信的方式，但这些限制比较上层。编程范式是最基础的限制，它限制我们的控制流和数据流：结构化编程限制了控制权的直接转移（限制了goto语句），面向对象编程限制了控制权的间接转移（限制了函数指针的使用），函数式编程限制了赋值

|编程范式||描述||
|---|---|---|---|
|结构化编程|限制控制权的直接转移|就是函数调用或者 goto 语句，代码在原来的流程里不继续执行了，转而去执行别的代码，并且你指明了执行什么代码。|限制goto语句|
|面向对象编程|限制控制权的间接转移|就是代码在原来的流程里不继续执行了，转而去执行别的代码，但具体执行了啥代码你也不知道，你只调了个函数指针或者接口。|限制函数指针|
|函数式编程|限制赋值|函数要保持独立，所有功能就是返回一个新的值，没有其他行为，尤其是不得修改外部变量的值||

没有结构化编程，程序就无法从一块块可证伪的逻辑搭建，没有面向对象编程，跨越组件边界会是一个非常麻烦而危险的过程，而函数式编程，让组件更加高效而稳定。没有编程范式，架构设计将无从谈起。

架构工作的基本方针

1. 尽可能长时间地保留尽可能多的可选项。
2. 低层次解耦方式能解决的，不要用高层次解耦方式。

组件拆分需要在两个维度进行：按层次拆分、按变更原因拆分。

## 从架构的过去看未来

[京东刘海锋：过去十年架构领域最重要的三个变化](https://mp.weixin.qq.com/s/_W9vUK8LY9RC1-QxfGFQSg)

架构领域经历了快速演进的十年。架构领域在整个互联网的技术栈是偏底层的，但过去十年架构领域的演进速度，一点都不亚于应用开发，甚至移动端开发的速度。比如容器，新型的数据库，新型的中间件，大规模集群的调度，以及系统跟算法的结合。比如

1. 容器
2. 数据库，数据库作为基础架构非常核心的组成部分，在过去的十年间里面有一个显著的特点是从大一统的一元的数据库逐渐走向多元，逐渐的走向为不同的应用场景而定制。以电商为例，一般来说会用 MySQL 以及 MySQL 的中间件，作为最关键的结构化存储，但同时会配上内存 KV Store 做加速、用检索型数据库做全文检索，用时间序列数据库做海量数据的监控采集和分析，等等。从 DB 底层核心技术来看，跨地域复制且强一致复制、计算与存储分离、**从以磁盘为中心到以内存为中心**，是三个非常显著的技术变迁。
3. 系统跟算法的结合越来越紧密，系统跟算法一起形成一家公司的技术的基石，系统相当于是骨架，而算法给骨架注入了灵魂。


软件架构，唯一不变的就是变化，但变化又分成了波动与趋势，所以对趋势的把握显得尤为重要。未来的两个预测

1. 架构智能化
2. 混合多云，接下来 5 到 10 年，很多大中型企业，他们重要的业务一定会横跨自己的数据中心和不同云服务商的数据中心。一定会有框架出现来屏蔽底层的这些差异与复杂性