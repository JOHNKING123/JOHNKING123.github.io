---
layout: post
title: nginx安装与简单使用
category: 技术
tags: WEB
keywords: nginx 负载平衡
---

## 简介 

以下操作将在vitualbox的一台ubuntu虚拟机上完成。IP为`192.168.56.156`

## 安装 ##


1. 安装
 
        apt-get install nginx
 
2. 启动
 
        sudo /etc/init.d/nginx start
 
3. 验证
 
        http://192.168.56.156/
    
![Alt text](/public/upload/nginx.png)

## 负载均衡 ##

1. 在ubuntu上安装两个tomcat（tomcat和tomcat1），端口分别使用8080和8081
    
    要使用压缩版（非安装版），对于新增的tomcat1，不仅要改其8080端口（http访问端口），还要改其shutdown端口（默人8005）和JVM启动端口（默人8009），启动两个tomcat。

2. 配置nginx进入`/etc/nginx/conf.d`目录，编辑

        server{
        	listen  80;
        	server_name  lqk.io;
        	location / {
        		proxy_pass        http://lqk.io;
        		proxy_set_header   Host             $host;
        		proxy_set_header   X-Real-IP        $remote_addr;
        		proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;
        	}
        }
        upstream   lqk.io  {
        	server   192.168.56.156:8080;
        	server   192.168.56.156:8081;
        }

    `/etc/init.d/nginx start` 启动nginx，可以进入`/var/log/nginx/error.log`查看是否出错，以及出错的具体信息。

3. 访问nginx

    想要在windows客户端访问`http://lqk.io`，需要windows识别lqk.io域名，可以配置windows的`C:\Windows\System32\drivers\etc\hosts`。然后在浏览器输入`http://lqk.io`即可。