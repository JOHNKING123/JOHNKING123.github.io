---

layout: post
title: Go初学
category: 技术
tags: Go
keywords: Go

---

## 一 为什么要学习新的语言 ##

我本来是Java方向的，为什么打算换“东家”呢？

1. 程序员要多会一点,有人提出一个观点：即使这个语言过时了，学习一下也是很有必要的，因为这让你从另一个角度来观察问题，看到新的方式去解决问题。
2. 多核化和并行化渐渐成为主流，而JAVA是上一个时代单机服务器时的产品，虽然它现在也在努力跟上潮流。
3. JAVA语法还是不够简单

    熟悉java多线程的人都知道，wait方法的调用必须在synchronized块中。并且，实现线程要继承Thread或者实现Runnable。总之，在java中开发多线程程序细节很多，能力要求也很高，是面试题的重要来源地。
    
    在未来的编程事业中，人们越来越关注实现业务本身，而实现业务所需的技术细节将主要由编程语言来实现。比如在Go语言中，实现一个线程将由一个关键字表示，学习的复杂性大大下降。
    
4. 当然，决定语言发展趋势的原因有很多。要单论简单性，C语言早该回家抱孩子了。从长远讲，语言要么效率足够高，要么足够简单，处在中间状态的语言的位置怕会很尴尬！

## 二 go语言的一点特性

所有函数参数都是传值的，只是一些参数底层结构的差异，导致它们传值的影响并不完全相同。

    func re2(a *[2]int){
    	(*a)[1]= 3
    }
    func re3(a *[2]int){
    	a = nil
    }
    func Test2(){
    	a := &[2]int{1,2}
    	re2(a)
    	for _,v := range a {
    		fmt.Println(v)
    	}
    	re3(a)    
    	fmt.Println(a)
    }
    输出：
    1    
    3         // 改变a指向的结构的内容的值
    &[1 3]    // 改变a的值（失效）
    
## 三 go runtime

每个go程序都会附带一个runtime，负责和底层的操作系统交互（同时屏蔽操作系统差异）。这个和java的jvm还不太一样：

- java的可执行文件一般为jar格式，本身无法直接执行。
- go的可执行文件可以直接运行在windows和linux操作系统中。

go程序运行前（即执行main函数前），会初始化内存分配器、垃圾回收器和goroutine调度器等。其中go runtime会事先申请一大段内存并自己管理，go程序并不直接向系统申请内存，这样可以减少系统调用，提高效率。

## 四 GOROOT GOPATH

GOROOT是go应用的安装目录，GOPATH指的是包加载路径，类似于java的classpath，你import说要使用这个包，go就会去GOPATH指定的目录中寻找。GOPATH可以指定多个路径，路径之间以分号分隔。

java中需要的jar包要下载（有的要交给maven管理），go中则通过`go get`获取第三方库。`go get`获取到一个完成的工程目录，并将其文件下载到GOPATH指定的第一个路径下。

## 五 Go Test
我们测试一个函数的功能，就必须要运行该函数，而则往往是由main函数开始触发的。在大型的项目中，测试一个函数的功能，总是劳驾main函数很不方便，于是我们可以使用`go test`功能。

假设存在`a.go`文件（文件中包含Add方法），我们只要在相同目录下创建`a_test.go`文件，在该目录下运行`go test`即可。（这将运行该目录下所有"_test"后缀文件中的带有“Test_”前缀的方法）

    package main
    import (
    	"fmt"
    	"testing"
    )
    func Test_Add(t *testing.T) {
    	re := Add(3,4)
    	fmt.Println(re)
    	// 如果没有抛出error，则运行go test将显示“PASS”
    }

## 六 类型转换和类型断言

类型断言貌似是，一个大类型，比如`interface{}`，我怀疑它可能是字符串，则可以`xxx.(string)`

类型转换的情况比较多：

1. 同一类型的转换，比如int64与int
2. 某类型与字符串的转换，这个有专门的包
3. 字符串与数组的转换，比如string与`[]uint8`等

## 帮助文档

[go库函数][]


[go库函数]: http://docscn.studygolang.com/pkg/