---

layout: post
title: quartz 源码分析
category: 技术
tags: Java
keywords: java quartz 定时任务

---

## 简介（未完待续）

经常在网上看别人的源码分析，但大家的思路路径一般不一致，所以往往看归看，忘归忘。刚好最近项目用到了定时任务，所以解析深入了解下quartz。


## 从使用开始讲起

### 简单使用

如何使用分为两个部分：quartz独立使用，和Spring结合使用。之所以分开，是因为spring的存在，虽然增加了易用性，但掩盖了大量细节，影响了我们对程序的直观感觉。quartz独立使用的例子可以参见 [深入解读Quartz的原理][]，基本流程就是

1. 创建Job
2. 创建Trigger
3. 创建Scheduler（工厂模式），`scheduleJob(jobDetail, strigger)`。
4. 最后，`Scheduler.start()`和` scheduler.shutdown(true)`，quartz就开始工作了。

quartz和spring的结合也非常的简单，上述第一步到第三步可由配置文件代替，第4步则随着spring容器的启动而启动，停止而停止。对程序的介入几乎没有，只要告诉配置文件什么时间运行哪个类的哪个方法即可。

### 动态调度


## 程序 = 数据结构 + 算法


## 使用建议

1. 尽量持久化。在生产环境中，只是完成功能是不够的，项目会因为迭代版本而多次重启。任务调度信息如果没有“记住”，那么项目重新启动时，就会有意料之外的行为发生。



## 引用



[深入解读Quartz的原理]: http://lavasoft.blog.51cto.com/62575/181907/