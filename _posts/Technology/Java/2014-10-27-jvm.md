---
layout: post
title: jvm小结
category: 技术
tags: Java
keywords: JAVA JVM
---

## 前言

本文主要是对《深入理解java虚拟机》，欢迎大家指正！

## JVM内存区域新画法 ##

我觉得《深入理解java虚拟机》，那张jvm内存区域图只是体现了内存区域的组成，我这个可能更好点：

![Alt text](/public/upload/jvm_memory.png)

## 垃圾收集算法

### 如何判断对象已经死亡

说白了，判断还有引用引用它么？

1. 引用计数法

    记录对象被引用的次数
  
2. 可达性分析算法

    以一系列GC Roots对象作为起点，从这写节点向下检索，当GC Roots到这些对象不可达时，则证明此对象是不可用的。

### 回收已死对象所占内存区域

当我们知道哪些对象可以回收时，如何提高回收效率呢？（当然是能一次性回收一片连续区域，效率最高）

1. 标记-清除算法

    - 实现： 第一遍，标记堆中哪些对象需要被回收；第二遍，回收被标记的对象。
    - 特点：效率不高，一次回收后，堆区碎片化

2. 复制算法

    - 实现：将区域分成两块（或多块），先紧着一块使用，这块用完后，将活着的对象复制到另一块，然后回收这一整块。
    - 特点：一部分区域会被浪费，如果对象都是“朝生夕死”的，则非常适合
3. 标记-整理算法

    - 实现：让所有活着的对象都向边界一端移动，清理端边界以外的堆区域
4. 分代收集算法

    - 实现：将堆区根据对象生存期分为几块，比如分为新生代和老年代，新生代采用“复制算法”，老年代采用“标记-清理”或“标记-整理”算法。