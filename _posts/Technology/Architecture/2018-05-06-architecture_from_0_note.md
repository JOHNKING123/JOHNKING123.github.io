---

layout: post
title: 《从0开始学架构》笔记
category: 技术
tags: Architecture
keywords: 分布式系统

---

## 简介

内容来自 李运华 在 极客时间 《从0开始学架构》 的 分享

优秀的人，总是会做一件事，对于一个领域，发现一些tip，提炼一个方法论，试错和完善这个方法论。

## tips

架构设计的 关键思维是 判断和 取舍，程序设计 的关键思维 是逻辑和实现。

架构是什么？

1. 首先 梳理几个概念：系统与子系统、模块与组件、框架与架构
2. 系统的定义，维基百科：系统泛指由一群有关联的个体组成，根据某种规则运作，能完成个别元件不能单独完成的工作的群体。包含多个有关联的个体，个体按定义好的规则运行。
3. 逻辑角度拆分，划分模块的主要目的是职责分离。物理角度拆分，划分组件的主要目的是 单元复用。比如做一个学生信息管理系统，从逻辑角度拆分可以分为登陆注册、个人信息、个人成绩等，从物理角度来拆分，可以分为Nginx、Web服务器、MySQL
4. 框架 通常指的是为了实现 某个业界标准或完成特定基本 任务的软件组件规范，提供规范所要求之基础功能。软件架构：软件系统的顶层结构。


## 架构设计的历史背景

1. 如果要深入理解一个事物的本质，最好的方式就是去追寻这个事物出现的历史背景和推动因素
2. 随着软件 系统规模的增加，计算相关 的算法 和 数据结构不再构成 主要的设计问题，当系统由许多部分组成时，整个系统的组织，也就是所说的“软件架构”，导致了一系列 新的设计问题。 笔者想起昨天 学习的paxos 算法，虽说是算法，但paxos 明显不再关注 各个节点如何存储、检索本地存储的通信数据 这类事儿，而是提出proposer、acceptor 等角色，规定了它们的 交流规则，这才是难点。

不好的架构有什么特点：不容易写，不容易读/懂，不容易改

架构设计 的主要目的是 为了解决 软件系统复杂度带来的问题（复杂度 变大 带来了第一次和第二次软件危机）。

复杂度来源

1. 高性能
2. 高可用
3. 可扩展性
4. 低成本、安全和规模。

	* 低成本通常不是首要目标，往往只有创新才能达到低成本目标。 
	* 规模变大后，量变可能会引起质变，如大数据就独立成为一门热门技术。

## 高性能

* 硬件性能的提升。通常不会带来复杂度的提升，比如存储从纸带,磁带,磁盘,ssd，替换就完事了
* 软件系统性能的提升，通常会带来复杂度的提升

软件这块
	
1 单机内部为提高性能带来的复杂度。单进程 ==> 多进程/多进程通信方案 ==> 多进程/多线程/多线程“通信”方案  
2 多台计算机为了高性能带来的复杂度

	* 任务分配，调度算法、负载均衡、负载监控报警、动态扩容缩容
	* 任务分解

## 高可用

系统无中断的执行其功能的能力，主要通过冗余来实现高可用。

1. 计算高可用
2. 存储高可用，存储高可用的难点不在于如何备份儿数据，而在于如何减少或者规避数据不一致对业务造成的影响（因为网络延迟、中断等不可避免）
3. 高可用状态决策

## 可扩展性

1. 面向对象思想的提出
2. 设计模式
3. 两个基本条件：正确预测变化，完美封装变化

完美封装变化

1. 系统需要拆分出变化层和稳定层
2. 需要设计变化层和稳定层之间的接口



## 个人


个人感觉，首先是分层，最上层是用户怎么操作。最底层 是你有什么东西。中间 是 最上层和最底层 的 适配，可能有多层。每一层 都是多个子模块，划分子模块的依据是

1. 业务层面

	* 具有明确的领域边界。比如用户管理、订单管理
	* 复用。比如红包和打赏 都要用到支付系统

2. 技术层面：

	* 易变和不易变的分开
	* 流量大和流量小的分开