---

layout: post
title: 计算机网络
category: 技术
tags: Architecture
keywords: network

---

## 简介

## 网路通信

本小节来自《Paas实现与运维管理》的笔记。

我们将网络世界的物理设备抽象为三种：计算节点，交换节点和路由节点

1. 因为计算节点不能两两相连，所以我们需要一个交换节点，负责**转发数据**。在数据链路层范围内

	* 计算节点在发送数据的时候，**应用程序中**不可能直接写目的主机的mac地址，所以我们需要一个虚拟地址，即ip地址。arp请求（广播）及arp缓存。
   * 交换节点收到一个包，在转发这个包的时候，没有mac地址与端口的映射，会先广播，然后建立mac地址与串口的映射关系。
    
2. 因为一个交换节点负责不了世界上的所有计算节点，（不然广播域也太大了），所以我们需要一个路由节点。

	* 计算节点在发送数据时，通过**ip+掩码**来判断目的计算节点是否在一个子网内。当发现不在一个子网时，它会将数据包发送给子网内的路由节点（也就是网关）。
   * 路由器根据路由表中的策略来接收和发送包。**这就不能叫转发了**，因为路由器会修改数据包。路由表中的rule可以静态设置，也可以动态学习。
    
修正自己以前的几个误区：

1. 除了功能不同，交换节点和路由节点的另一个区别：交换节点并不修改package
2. 实际上，计算节点通过交换节点向路由节点发送数据，交换节点转发包可以理解为透明。所以是：`计算节点 ==> 路由节点 ==> 计算节点 `实现跨网络传输
3. 不仅计算节点有数据通信，路由节点也有数据通信
4. 计算节点的广播（arp），交换节点的广播，路由节点的广播（RIP路由协议）。广播有的时候是为了请求信息，有点时候是为了通知。

