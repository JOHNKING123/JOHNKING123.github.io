---

layout: post
title: 统一弹屏系统
category: 技术
tags: Architecture
keywords: unified popup

---

## 简介

各个网站有不同的说法，弹框、弹窗、弹屏等，是一个意思，下文不作明显区分。

## 产品层面

[两大维度建立你自己的app弹窗体系](https://www.jianshu.com/p/3f35badaae00)

1. 大多数人就是因为信息没有拉通而且不善于总结才导致没有形成自己的设计体系。
2. 文中提到的 弹框 包括用户直接触发（点击+弹出选项）、用户主动触发系统反馈的 和 系统自动触发的
3. 在拉通所有分类、场景、样式后，再去执行，你会有一种前所未有的成就感，感觉一切都在自己的掌控之中，这也就是总结的魅力所在。


[浅谈APP首页弹框形式和价值](http://www.woshipm.com/pd/638886.html)

1. 弹框的形式

	* 是否是模态
	* 是否可以关闭弹框
	* 是否可以跳出弹框
	* 是否自动关闭弹框

2. 弹框的价值

	* 系统操作引导，引导用户打开权限、打开推送、获取用户位置
	* 任务领取或提示，签到、优惠券发放等
	* 版本更新提醒
	* 获取用户反馈
	* 活动页宣传

3. 其它细节

	1. 出现频率
	2. 出现位置
	3. 停留时间（针对自动关闭弹框）
	4. 关闭按钮位置
	5. 上线时间段

4. 弹框的视觉

	1. 单纯文字
	2. 图片
	3. 图片 + 文字
	

产品层面、设计层面 提到弹框的很多，但技术层面上  统一弹屏 系统比较少。

## 随想

1. 弹框下发给谁：设备信息，用户画像
2. 效果评估：
3. 权限控制：审批
4. 下发：实时请求，还是 配置中心全量下发 ，服务端决策，还是信息给客户端，客户端决策
4. 支持多app

和统跳 服务、广告服务、可视化埋点服务的关系

## 后端设计

### 整体套路

### 弹屏显示的位置如何确定

## portal 设计

### 数据怎么送到客户端

1. 单独的sdk 请求
	
	* 拉取数据
	* 汇报结果
2. 配置中心

	* 要么侵入 配置中心的逻辑，直接下发合适的数据
	* 要么配置中心是全集合，再单独开发一个sdk 去读取这个全集合

综上，因为要汇报的缘故，单独的sdk 是免不了的，既然单独的sdk 免不了，数据下发的部分 也由 sdk 来承担

### 数据如何匹配/下发

当然，还包括 灰度下发

找 广告组 沟通下

## 客户端

### 客户端的展示机制

不管 弹屏是每次进入都展示，还是只第一次进入时展示。客户端 在进入某个页面时 一定要查询一下

有一个数据，那么abtest 就可以多支持 一种 ab 的类型













