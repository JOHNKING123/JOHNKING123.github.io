---

layout: post
title: 分布式配置系统
category: 技术
tags: Architecture
keywords: 分布式配置系统 zookeeper etcd Consul

---

## 简介

分布式配置系统一般有zookeeper,etcd,Consul等

分布式配置中心一般有以下要求：

1. 集中管理外部依赖的服务配置和服务内部配置
2. 提供web管理平台进行配置和查询
3. 支持服务注册与发现
4. 支持客户端拉取配置
5. 支持订阅与发布，配置变更主动通知到client，实时变更配置

    这条跟消息队列很像，不过两者的目的完全不同。


我个人觉得比较直观的一条便是：

- 使用之前，分布式系统各主机间交互，需要跨网络访问
- 使用之后，分布式系统的daemon服务只需与配置中心daemon交互即可。省事，尤其是一个消息要通知好几个主机时。起作用类似于集线器。

    - 两台电脑互通，需要一根网线
    - 三台电脑互通，需要三根网线
    - 四台电脑互通，需要六根网线
    - 四台电脑互通，如果使用集线器，则需要四根网线即可

当然，如果是交互的数据量太大，还是各主机自己动手或使用消息队列。

分布式配置系统一般有以下不同：

1. client监听的端口号、daemon监听的端口号
2. 对外提供的数据格式
3. 一致性原理


## 典型应用场景

1. 假设一个系统有多个后端，后端在不断变化（后端可能会宕机，也可能有新的后端加入）。那么前端，就需要感知到这种变化。

2. 分布式锁。传统的锁应用于同一主机的多个进程（或线程），那么对于不同主机的进程，如何保证数据一致性。