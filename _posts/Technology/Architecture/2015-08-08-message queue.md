---

layout: post
title: 消息队列
category: 技术
tags: Architecture
keywords: 消息队列 rabbitmq kafka

---

## 简介


## linux的消息队列

进程间通信的三大手段之一（共享内存、信号和消息队列），对于不同的通信手段，进程消费“通信数据”的方式不同。

消息队列和管道的区别：

- 管道的中间介质是文件。
- 消息队列是消息缓冲区，在内存中以队列的形式组织，传输时以消息（一个数据结构）为单位。

## 消息队列系统

基于内存或磁盘的队列，为分布式应用提供通信手段。

个人观察，使用消息队列系统一个原因是：现代大型系统，大多由多个子系统组成。以A,B两个子系统为例，假定，A系统的输出由B系统处理。一般情况下，B系统的处理能力可以满足A系统的要求。然而，当A系统负载突然增大时，如果AB两系统以RPC方式连接，则会引起连锁反应:B系统也扛不住了。使用消息队列后，因为队列的缓冲功能，B系统可以按照自己的节奏处理数据，提高系统的可靠性。

除此之外，使用消息队列还有以下好处：

1. 分布式应用不用自己实现通信（或者说，不直接和目标对象通信）：

    传统的tcp socket方式：建立连接，通信，关闭连接。

    - 对于命令行，体现在，只需使用cli便可将消息发送出去
    - 对于代码开发，则只需引入相关的库，既可以直接使用其接口

2. 扩展了通信模式（表示可能有问题）

    - 点对点，一对一连接
    - 多点广播，一对多连接
    - 发布/订阅，消息一般是分主题的（topic），发送者与接收者只关心主题，并不介意消息由谁来发送和接收。

其实，qq也类似于一个消息队列系统。

消息队列系统有很多，主要有以下不同：

1. 消息队列存在哪？内存、磁盘？
2. 是否支持分布式
3. 消息的格式是什么？
4. 系统是否能够确保：消息一定会被接收，消息未被正确处理时通知发送方。


至于kafka、flume和rabbitmq等系统，网上资料很多，此处不再赘述。

